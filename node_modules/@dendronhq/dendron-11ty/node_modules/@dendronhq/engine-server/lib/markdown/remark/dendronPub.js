"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.dendronPub = void 0;
const unist_util_visit_1 = __importDefault(require("unist-util-visit"));
const types_1 = require("../types");
const utils_1 = require("../utils");
function plugin(opts) {
    const proc = this;
    const { dest } = utils_1.MDUtilsV4.getDendronData(proc);
    function transformer(tree, _file) {
        unist_util_visit_1.default(tree, (node) => {
            if (node.type === "image" && dest === types_1.DendronASTDest.HTML) {
                let imageNode = node;
                if (opts === null || opts === void 0 ? void 0 : opts.assetsPrefix) {
                    imageNode.url = opts.assetsPrefix + imageNode.url;
                }
            }
        });
        return tree;
    }
    return transformer;
}
exports.dendronPub = plugin;
//# sourceMappingURL=dendronPub.js.map