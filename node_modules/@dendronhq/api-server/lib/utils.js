"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getWS = exports.putWS = exports.getWSKey = void 0;
const lodash_1 = __importDefault(require("lodash"));
const memoryStore_1 = require("./store/memoryStore");
function getWSKey(uri) {
    return lodash_1.default.trimEnd(uri, "/");
}
exports.getWSKey = getWSKey;
async function putWS({ ws, engine, }) {
    memoryStore_1.MemoryStore.instance().put(`ws:${getWSKey(ws)}`, engine);
}
exports.putWS = putWS;
async function getWS({ ws }) {
    const engine = await memoryStore_1.MemoryStore.instance().get(`ws:${getWSKey(ws)}`);
    if (!engine) {
        throw `No Engine: ${ws}`;
    }
    return engine;
}
exports.getWS = getWS;
//# sourceMappingURL=utils.js.map